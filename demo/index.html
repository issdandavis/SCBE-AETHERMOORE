<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCBE Secure Bank Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 30px 0; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 30px; }
        header h1 { font-size: 2.5em; background: linear-gradient(90deg, #00d4ff, #7b2cbf); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        header p { color: #888; margin-top: 10px; }
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        @media (max-width: 900px) { .main-grid { grid-template-columns: 1fr; } }
        .card { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); }
        .card h2 { margin-bottom: 20px; color: #00d4ff; font-size: 1.3em; }
        .balance { font-size: 3em; font-weight: bold; color: #4ade80; text-align: center; padding: 20px 0; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #aaa; }
        .form-group input { width: 100%; padding: 15px; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: rgba(0,0,0,0.3); color: #fff; font-size: 1em; }
        .form-group input:focus { outline: none; border-color: #00d4ff; }
        .btn { width: 100%; padding: 15px 30px; border: none; border-radius: 8px; font-size: 1em; cursor: pointer; transition: all 0.3s; margin-top: 10px; }
        .btn-primary { background: linear-gradient(90deg, #00d4ff, #7b2cbf); color: #fff; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,212,255,0.4); }
        .btn-danger { background: linear-gradient(90deg, #ef4444, #dc2626); color: #fff; }
        .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(239,68,68,0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .security-layers { max-height: 400px; overflow-y: auto; }
        .layer { display: flex; align-items: center; padding: 10px; margin-bottom: 5px; border-radius: 8px; background: rgba(0,0,0,0.2); transition: all 0.3s; }
        .layer.processing { background: rgba(0,212,255,0.2); border-left: 3px solid #00d4ff; }
        .layer.success { background: rgba(74,222,128,0.2); border-left: 3px solid #4ade80; }
        .layer.failed { background: rgba(239,68,68,0.2); border-left: 3px solid #ef4444; }
        .layer-number { width: 30px; height: 30px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; margin-right: 15px; font-size: 0.8em; }
        .layer.success .layer-number { background: #4ade80; color: #000; }
        .layer.failed .layer-number { background: #ef4444; }
        .layer-info { flex: 1; }
        .layer-name { font-weight: bold; font-size: 0.9em; }
        .layer-status { font-size: 0.75em; color: #888; }
        .layer-icon { font-size: 1.2em; }
        .log { background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px; max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 0.85em; }
        .log-entry { padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .log-entry.success { color: #4ade80; }
        .log-entry.error { color: #ef4444; }
        .log-entry.info { color: #00d4ff; }
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px; }
        .stat { text-align: center; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px; }
        .stat-value { font-size: 1.8em; font-weight: bold; color: #00d4ff; }
        .stat-label { font-size: 0.8em; color: #888; margin-top: 5px; }
        .envelope-viz { background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px; margin-top: 15px; font-family: monospace; font-size: 0.7em; word-break: break-all; max-height: 250px; overflow: auto; }
        .envelope-viz pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>SCBE Secure Bank</h1>
            <p>Powered by 14-Layer Hyperbolic Geometry Security | Post-Quantum Cryptography</p>
        </header>
        <div class="main-grid">
            <div>
                <div class="card">
                    <h2>Your Account</h2>
                    <div class="balance">$<span id="balance">10,000</span></div>
                    <div class="stats">
                        <div class="stat"><div class="stat-value" id="txCount">0</div><div class="stat-label">Transactions</div></div>
                        <div class="stat"><div class="stat-value" id="blockedCount">0</div><div class="stat-label">Attacks Blocked</div></div>
                        <div class="stat"><div class="stat-value" id="securityScore">100</div><div class="stat-label">Security Score</div></div>
                    </div>
                </div>
                <div class="card" style="margin-top: 20px;">
                    <h2>Send Money</h2>
                    <div class="form-group"><label>Recipient Account</label><input type="text" id="recipient" placeholder="Enter account ID" value="ACC-7829"></div>
                    <div class="form-group"><label>Amount ($)</label><input type="number" id="amount" placeholder="Enter amount" value="100"></div>
                    <button class="btn btn-primary" id="sendBtn" onclick="sendMoney()">Send Securely</button>
                    <button class="btn btn-danger" style="margin-top: 10px;" onclick="simulateAttack()">Simulate Hacker Attack</button>
                </div>
                <div class="card" style="margin-top: 20px;">
                    <h2>Transaction Log</h2>
                    <div class="log" id="log"><div class="log-entry info">System initialized. SCBE 14-layer security active.</div></div>
                </div>
            </div>
            <div>
                <div class="card">
                    <h2>14-Layer Security Pipeline</h2>
                    <div class="security-layers" id="layers"></div>
                </div>
                <div class="card" style="margin-top: 20px;">
                    <h2>Encrypted Envelope (AES-256-GCM)</h2>
                    <div class="envelope-viz" id="envelope"><pre>Waiting for transaction...</pre></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const LAYERS = [
            { id: 1, name: 'Complex State', desc: 'Context to complex vector' },
            { id: 2, name: 'Realification', desc: 'C^D to R^2D embedding' },
            { id: 3, name: 'Weighted Transform', desc: 'SPD metric (golden ratio)' },
            { id: 4, name: 'Poincare Embedding', desc: 'Map to hyperbolic ball' },
            { id: 5, name: 'Hyperbolic Distance', desc: 'Compute d_H(u,v)' },
            { id: 6, name: 'Breathing Transform', desc: 'Temporal diffeomorphism' },
            { id: 7, name: 'Mobius Addition', desc: 'Gyrovector isometry' },
            { id: 8, name: 'Realm Distance', desc: 'Trust realm proximity' },
            { id: 9, name: 'Spectral Coherence', desc: 'FFT pattern analysis' },
            { id: 10, name: 'Spin Coherence', desc: 'Phase alignment' },
            { id: 11, name: 'Triadic Temporal', desc: 'Multi-timescale fusion' },
            { id: 12, name: 'Harmonic Scaling', desc: 'Risk amplification H(d,R)' },
            { id: 13, name: 'Risk Decision', desc: 'ALLOW/QUARANTINE/DENY' },
            { id: 14, name: 'Audio Axis', desc: 'Hilbert telemetry seal' }
        ];
        let balance = 10000, txCount = 0, blockedCount = 0;
        
        function initLayers() {
            document.getElementById('layers').innerHTML = LAYERS.map(l => 
                '<div class="layer" id="layer-'+l.id+'"><div class="layer-number">'+l.id+'</div><div class="layer-info"><div class="layer-name">'+l.name+'</div><div class="layer-status">'+l.desc+'</div></div><div class="layer-icon">⏳</div></div>'
            ).join('');
        }
        
        function resetLayers() { LAYERS.forEach(l => { const el = document.getElementById('layer-'+l.id); el.className = 'layer'; el.querySelector('.layer-icon').textContent = '⏳'; }); }
        
        async function processLayer(id, success = true) {
            const el = document.getElementById('layer-'+id);
            el.className = 'layer processing'; el.querySelector('.layer-icon').textContent = '⚡';
            await new Promise(r => setTimeout(r, 120 + Math.random() * 80));
            el.className = success ? 'layer success' : 'layer failed';
            el.querySelector('.layer-icon').textContent = success ? '✓' : '✗';
        }
        
        function log(msg, type = 'info') {
            const t = new Date().toLocaleTimeString();
            document.getElementById('log').innerHTML = '<div class="log-entry '+type+'">['+t+'] '+msg+'</div>' + document.getElementById('log').innerHTML;
        }
        
        function updateBalance() {
            document.getElementById('balance').textContent = balance.toLocaleString();
            document.getElementById('txCount').textContent = txCount;
            document.getElementById('blockedCount').textContent = blockedCount;
        }
        
        function generateEnvelope(recipient, amount, isAttack = false) {
            const hex = n => Array.from({length: n}, () => Math.floor(Math.random() * 256).toString(16).padStart(2, '0')).join('');
            return {
                version: 'scbe-v1', timestamp: Date.now(), nonce: hex(12),
                aad: { recipient, amount, intent: 'transfer', env: 'demo' },
                ciphertext: hex(48), tag: hex(16),
                signatures: { ko: hex(8)+'...', ru: hex(8)+'...' },
                risk_score: isAttack ? 0.92 : 0.08
            };
        }
        
        function showEnvelope(e) { document.getElementById('envelope').innerHTML = '<pre>'+JSON.stringify(e, null, 2)+'</pre>'; }
        
        async function sendMoney() {
            const recipient = document.getElementById('recipient').value;
            const amount = parseInt(document.getElementById('amount').value);
            if (!recipient || !amount || amount <= 0) { log('Invalid transaction', 'error'); return; }
            if (amount > balance) { log('Insufficient funds', 'error'); return; }
            document.getElementById('sendBtn').disabled = true;
            resetLayers();
            log('Initiating secure transfer of $'+amount+' to '+recipient+'...', 'info');
            showEnvelope(generateEnvelope(recipient, amount));
            for (let i = 1; i <= 14; i++) await processLayer(i, true);
            balance -= amount; txCount++;
            updateBalance();
            log('SUCCESS: $'+amount+' securely transferred to '+recipient, 'success');
            document.getElementById('sendBtn').disabled = false;
        }
        
        async function simulateAttack() {
            const attacks = [
                { name: 'Replay Attack', layer: 6, desc: 'Reused nonce detected' },
                { name: 'Data Tampering', layer: 9, desc: 'Spectral anomaly detected' },
                { name: 'Injection Attack', layer: 4, desc: 'Invalid Poincare coordinates' },
                { name: 'Man-in-the-Middle', layer: 11, desc: 'Temporal signature mismatch' }
            ];
            const attack = attacks[Math.floor(Math.random() * attacks.length)];
            document.getElementById('sendBtn').disabled = true;
            resetLayers();
            log('ALERT: '+attack.name+' detected!', 'error');
            showEnvelope(generateEnvelope('ATTACKER-X', 99999, true));
            for (let i = 1; i <= 14; i++) {
                if (i === attack.layer) { await processLayer(i, false); log('Layer '+i+' BLOCKED: '+attack.desc, 'error'); break; }
                await processLayer(i, true);
            }
            blockedCount++; updateBalance();
            log('Transaction DENIED - Attack neutralized by SCBE security', 'error');
            document.getElementById('sendBtn').disabled = false;
        }
        
        initLayers();
    </script>
</body>
</html>
